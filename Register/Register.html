<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="../../Normalize/normalize.css">
    <link rel="stylesheet" type="text/css" href="Register.css">
    <!-- Importation police d'écriture -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <!-- menu de navigation -->
        <nav>
                <a href="../Accueil/Accueil.html">Accueil</a>
                <a href="../Login/Login.html">Login</a>
        </nav>
    </header>
    <div>
        <fieldbox>
            <h1>Register<br></h1>
            <p id="message"></p>
            <input type="email" id="email" name="email" placeholder="Email" onfocusout="verif('email')">
            <img width="15px" height="15px" id="emailimg" src="../Assets/Graphique/failed.png" alt="Erreur"><br>
            <input type="text" id="pseudo" name="pseudo" placeholder="Pseudo" onfocusout="verif('pseudo')">
            <img width="15px" height="15px" id="pseudoimg" src="../Assets/Graphique/failed.png" alt="Erreur"><br>
            <input type="password" id="password1" name="password1" placeholder="Mot de passe"
                onfocusout="verif('password1')">
            <img width="15px" height="15px" id="password1img" src="../Assets/Graphique/failed.png" alt="Erreur"><br>
            <input type="password" id="password2" name="password2" placeholder="Resaisisez le mot de passe"
                onfocusout="verif('password2')">
            <img width="15px" height="15px" id="password2img" src="../Assets/Graphique/failed.png" alt="Erreur"><br>
            <button id="btnRegister" onclick="register()">Register</button>
            <script>
                // Attribuer les element html
                email = document.getElementById("email");
                emailimg = document.getElementById("emailimg");
                pseudo = document.getElementById("pseudo");
                pseudoimg = document.getElementById("pseudoimg");
                password1 = document.getElementById("password1");
                password1img = document.getElementById("password1img");
                password2 = document.getElementById("password2");
                password2img = document.getElementById("password2img");
                message = document.getElementById("message");
                verEmail = false;
                verPseudo = false;
                verPassword1 = false;
                verPassword2 = false;

                function register() {
                    if (verEmail && verPseudo && verPassword1 && verPassword2) {
                        sessionStorage.setItem('login1', pseudo.value);
                        sessionStorage.setItem('mdp1', password1.value);
                        window.location.replace("../Login/Login.html");
                    } else {
                        message.innerHTML = "Erreur : impossible de créer un compte"
                    }
                }

                function verif(x) {
                    switch (x) {
                        case 'email':
                            if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email.value)) {
                                emailimg.src = "../Assets/Graphique/accept.png";
                                message.innerHTML = "";
                                verEmail = true;
                            } else {
                                message.innerHTML = "L'adresse email n'est pas dans un format valid!";
                                emailimg.src = "../Assets/Graphique/failed.png";
                                verEmail = false;
                            }
                            break;
                        case 'pseudo':
                            if (pseudo.value.length > 1) {
                                pseudoimg.src = "../Assets/Graphique/accept.png";
                                message.innerHTML = "";
                                verPseudo = true;
                            } else {
                                message.innerHTML = "le pseudo doit être plus grand que 1 caractère";
                                pseudoimg.src = "../Assets/Graphique/failed.png";
                                verPseudo = false;
                            }
                            break;
                        case 'password1':
                            if (password1.value.length > 7 && password1.value.length < 15) {
                                password1img.src = "../Assets/Graphique/accept.png";
                                message.innerHTML = "";
                                verPassword1 = true;
                            } else {
                                password1img.src = "../Assets/Graphique/failed.png";
                                message.innerHTML = "Le mot de passe doit être entre 8 et 15 caractères";
                                verPassword1 = false;
                            }
                            break;
                        case 'password2':
                            if (password1.value == password2.value && password1.value.length > 1) {
                                password2img.src = "../Assets/Graphique/accept.png";
                                message.innerHTML = "";
                                verPassword2 = true;
                            } else {
                                password2img.src = "../Assets/Graphique/failed.png";
                                message.innerHTML = "Les mots de passe ne sont pas les même";
                                verPassword2 = false;
                            }
                            break;
                    }

                }
            </script>
        </fieldbox>
    </div>
</body>

<!-- LICENCE -->
<footer>Copyright © BY HistoireHalloween</footer>

</html>